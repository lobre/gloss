(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1992:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>E});var s=l(8081),n=l(2149);function r(e){let t=function(e){let t=Number.parseInt(e=e.replace(/^#/,""),16);return{r:t>>16&255,g:t>>8&255,b:255&t}}(e),l=t.r/255,s=t.g/255,n=t.b/255;return .2126*(l<=.03928?l/12.92:Math.pow((l+.055)/1.055,2.4))+.7152*(s<=.03928?s/12.92:Math.pow((s+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))}function o(e){return r(e)>.5?"#000000":"#ffffff"}function i(e){let{tile:t,isSelected:l,isDragging:r=!1,backgroundColor:i,onClick:a,onDragStart:c}=e,[d,h]=(0,n.useState)(!1),[u,x]=(0,n.useState)(!1),[m,f]=(0,n.useState)({x:0,y:0}),p=(0,n.useRef)(null),g=(0,n.useRef)(null),{id:j,label:v,description:b,color:y,x:w,y:N,width:C,height:k}=t,S=o(i),M=o(i);return(0,n.useEffect)(()=>(d&&!r&&""!==b.trim()?p.current=setTimeout(()=>{x(!0)},1e3):(p.current&&(clearTimeout(p.current),p.current=null),x(!1)),()=>{p.current&&clearTimeout(p.current)}),[d,r,b]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"absolute text-center text-sm select-none",style:{left:"".concat(w,"px"),top:"".concat(N-20,"px"),width:"".concat(C,"px"),color:S},children:v}),(0,s.jsx)("div",{className:"absolute cursor-move flex items-center justify-center select-none rounded-lg",style:{left:"".concat(w,"px"),top:"".concat(N,"px"),width:"".concat(C,"px"),height:"".concat(k,"px"),backgroundColor:y,boxShadow:"0 2px 4px rgba(0,0,0,0.1)",outline:l?"2px solid ".concat(M):"none",outlineOffset:"2px",zIndex:r?20:l?10:1},onClick:a,onMouseDown:c,onMouseEnter:()=>{h(!0)},onMouseLeave:()=>{h(!1)},onMouseMove:e=>{f({x:e.clientX,y:e.clientY})}}),u&&""!==b.trim()&&(0,s.jsx)("div",{ref:g,className:"fixed z-50 p-2 rounded-lg shadow-lg text-sm",style:{left:"".concat(m.x,"px"),top:"".concat(m.y-10,"px"),transform:"translate(-50%, -100%)",backgroundColor:"#ffffff"===S?"#ffffff":"#333333",color:"#ffffff"===S?"#333333":"#ffffff",borderRadius:"8px",maxWidth:"250px",pointerEvents:"none"},children:b})]})}let a=(0,n.forwardRef)((e,t)=>{let{tiles:l,selectedIds:r,backgroundColor:a,onCreateTile:c,onTileMove:d,onSelectionChange:h,onTileReorder:u,onMultiTileMove:x,onKeyDown:m,onClick:f,onMoveEnd:p,onUpdateContrastColors:g}=e,j=(0,n.useRef)(null),[v,b]=(0,n.useState)(!1),[y,w]=(0,n.useState)(null),[N,C]=(0,n.useState)({x:0,y:0}),[k,S]=(0,n.useState)(!1),[M,R]=(0,n.useState)(!1),[E,L]=(0,n.useState)(null),[U,I]=(0,n.useState)(!1),[F,T]=(0,n.useState)({x:0,y:0}),[D,A]=(0,n.useState)({x:0,y:0});(0,n.useEffect)(()=>{let e=e=>{"Control"===e.key&&S(!0)},t=e=>{"Control"===e.key&&S(!1)};return window.addEventListener("keydown",e),window.addEventListener("keyup",t),()=>{window.removeEventListener("keydown",e),window.removeEventListener("keyup",t)}},[]);let z=e=>{if(!j.current)return{x:0,y:0};let t=j.current.getBoundingClientRect();return{x:e.clientX-t.left+j.current.scrollLeft,y:e.clientY-t.top+j.current.scrollTop}},O=e=>{if(U){let t=Math.min(F.x,D.x),s=Math.min(F.y,D.y),n=Math.max(F.x,D.x),o=Math.max(F.y,D.y),i=l.filter(e=>e.x<n&&e.x+e.width>t&&e.y<o&&e.y+e.height>s);if(i.length>0){let t=i.map(e=>e.id);e.ctrlKey||k?h([...r.filter(e=>!t.includes(e)),...t]):h(t)}I(!1)}v&&!M&&E&&G(E,e.ctrlKey||k),v&&M&&p&&p(),b(!1),w(null),R(!1),L(null)},G=(e,t)=>{u(e),t?r.includes(e)||h([...r,e]):r.includes(e)||h([e])},K=(e,t)=>{t.stopPropagation(),v||G(e,t.ctrlKey||k)},$=(e,t)=>{if(0!==t.button)return;t.stopPropagation(),L(e),R(!1);let s=l.find(t=>t.id===e);if(s){let l=z(t);C({x:l.x-s.x,y:l.y-s.y}),b(!0),w(e),r.includes(e)||(t.ctrlKey||k?h([...r,e]):h([e])),u(e)}},H={left:Math.min(F.x,D.x),top:Math.min(F.y,D.y),width:Math.abs(D.x-F.x),height:Math.abs(D.y-F.y)},B=o(a);return(0,s.jsx)("div",{ref:e=>{"function"==typeof t?t(e):t&&(t.current=e),j.current=e},className:"flex-1 overflow-auto relative",style:{backgroundColor:a},onContextMenu:e=>{e.preventDefault();let{x:t,y:s}=z(e),n=l.find(e=>t>=e.x&&t<=e.x+e.width&&s>=e.y&&s<=e.y+e.height);if(n&&1===r.length&&g){let e=l.find(e=>e.id===r[0]);e&&g(e.color,n.color)}else c(t,s,e.ctrlKey||k)},onMouseDown:e=>{var t;if(0===e.button&&(f&&f(),e.target===j.current||e.target===(null===(t=j.current)||void 0===t?void 0:t.firstChild))){let t=z(e);T(t),A(t),I(!0),e.ctrlKey||k||h([])}},onMouseMove:e=>{let t=z(e);if(U&&A(t),v&&y){R(!0);let e=t.x-N.x,s=t.y-N.y;if(r.includes(y)&&r.length>1){let t=l.find(e=>e.id===y);t&&x(r,e-t.x,s-t.y)}else d(y,e,s)}},onMouseUp:O,onMouseLeave:O,onKeyDown:m,tabIndex:0,children:(0,s.jsxs)("div",{className:"relative w-[3000px] h-[3000px]",children:[l.map(e=>(0,s.jsx)(i,{tile:e,isSelected:r.includes(e.id),isDragging:y===e.id,backgroundColor:a,onClick:t=>K(e.id,t),onDragStart:t=>$(e.id,t)},e.id)),U&&H.width>5&&H.height>5&&(0,s.jsx)("div",{className:"absolute pointer-events-none z-[1000]",style:{left:"".concat(H.left,"px"),top:"".concat(H.top,"px"),width:"".concat(H.width,"px"),height:"".concat(H.height,"px"),border:"1px dashed ".concat(B),backgroundColor:"".concat(B,"10")}})]})})});a.displayName="Canvas";var c=l(5160),d=l(7890),h=l(7037),u=l(5192);function x(){let[e,t]=(0,n.useState)(!1);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.$,{variant:"ghost",size:"icon",onClick:()=>t(!0),className:"rounded-full w-8 h-8 bg-gray-100 hover:bg-gray-200",children:(0,s.jsx)("span",{className:"text-base font-semibold",children:"?"})}),(0,s.jsx)(u.lG,{open:e,onOpenChange:t,children:(0,s.jsxs)(u.Cf,{className:"max-w-3xl max-h-[80vh] overflow-y-auto",children:[(0,s.jsxs)(u.c7,{children:[(0,s.jsx)(u.L3,{children:"Gloss - Color Palette Designer"}),(0,s.jsx)(u.rr,{children:"A tool for designing color palettes with precision and accessibility"})]}),(0,s.jsxs)("div",{className:"space-y-4 mt-4",children:[(0,s.jsxs)("section",{children:[(0,s.jsx)("h3",{className:"text-lg font-medium mb-2",children:"About Gloss"}),(0,s.jsx)("p",{children:"Gloss is a tool for manually designing color palettes with precise control. Unlike automated palette generators, Gloss gives you complete control over your colors while providing helpful tools to ensure harmony and accessibility."})]}),(0,s.jsxs)("section",{children:[(0,s.jsx)("h3",{className:"text-lg font-medium mb-2",children:"Color Picker Modes"}),(0,s.jsx)("p",{className:"mb-2",children:"The color picker has two main modes:"}),(0,s.jsxs)("ul",{className:"list-disc pl-5 space-y-2",children:[(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{children:"Wheel Mode:"})," In this mode, all colors share the same lightness value, but can have different hue and saturation values. This is useful for creating colors that have the same perceived brightness."]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{children:"Slider Mode:"})," In this mode, all colors share the same hue and saturation values, but can have different lightness values. This is useful for creating shades and tints of the same color."]})]})]}),(0,s.jsxs)("section",{children:[(0,s.jsx)("h3",{className:"text-lg font-medium mb-2",children:"Color Spaces"}),(0,s.jsxs)("ul",{className:"list-disc pl-5 space-y-2",children:[(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{children:"HSL:"})," The standard Hue, Saturation, Lightness color space. Simple but not perceptually uniform."]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{children:"OKHSL:"})," A perceptually uniform color space that provides more consistent visual results across the entire color spectrum."]})]})]}),(0,s.jsxs)("section",{children:[(0,s.jsx)("h3",{className:"text-lg font-medium mb-2",children:"Keyboard Modifiers"}),(0,s.jsxs)("ul",{className:"list-disc pl-5 space-y-2",children:[(0,s.jsxs)("li",{children:["Hold ",(0,s.jsx)("kbd",{className:"px-1 py-0.5 bg-gray-100 border rounded",children:"Shift"})," to constrain movement along hue"]}),(0,s.jsxs)("li",{children:["Hold ",(0,s.jsx)("kbd",{className:"px-1 py-0.5 bg-gray-100 border rounded",children:"Ctrl"})," to constrain movement along saturation"]})]})]}),(0,s.jsxs)("section",{children:[(0,s.jsx)("h3",{className:"text-lg font-medium mb-2",children:"Mouse & Keyboard Controls"}),(0,s.jsxs)("ul",{className:"list-disc pl-5 space-y-2",children:[(0,s.jsx)("li",{children:"Right-click: Create a new tile"}),(0,s.jsx)("li",{children:"Left-click: Select a tile"}),(0,s.jsx)("li",{children:"Ctrl+click: Add to selection"}),(0,s.jsx)("li",{children:"Click and drag: Select or move tiles"}),(0,s.jsx)("li",{children:"Delete/Backspace: Remove selected tiles"}),(0,s.jsx)("li",{children:"Undo (Ctrl+Z or undo button): Revert the last action"}),(0,s.jsx)("li",{children:"Redo (Ctrl+Y or redo button): Restore the last undone action"})]})]}),(0,s.jsxs)("section",{children:[(0,s.jsx)("h3",{className:"text-lg font-medium mb-2",children:"Contrast Analysis"}),(0,s.jsx)("p",{children:"When you select two tiles or a tile and the background, Gloss automatically calculates the contrast ratio between them and shows WCAG accessibility compliance information."})]})]})]})})]})}var m=l(1018);let f=(0,m.A)("Undo2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]]),p=(0,m.A)("Redo2",[["path",{d:"m15 14 5-5-5-5",key:"12vg1m"}],["path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5A5.5 5.5 0 0 0 9.5 20H13",key:"6uklza"}]]);function g(e){let{backgroundColor:t,onBackgroundColorChange:l,onBackgroundSelect:r,onReset:o,getExportData:i,getUrlEncodedState:a,onUndo:m,onRedo:g,canUndo:j=!1,canRedo:v=!1,showUndoRedo:b=!1,hasTiles:y=!1}=e,[w,N]=(0,n.useState)(!1),[C,k]=(0,n.useState)(!1),[S,M]=(0,n.useState)(""),[R,E]=(0,n.useState)(""),{showToast:L,ToastContainer:U}=(0,h.d)(),I=e=>{navigator.clipboard.writeText(e).then(()=>{L("Copied to clipboard!")}).catch(e=>{console.error("Failed to copy: ",e)})};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"h-14 border-b bg-white flex items-center px-4 justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("h1",{className:"font-bold text-lg",children:"Gloss"}),(0,s.jsx)(x,{}),(0,s.jsx)("div",{className:"h-6 w-px bg-gray-300 mx-2"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(d.J,{htmlFor:"bg-color",className:"text-sm",children:"Background:"}),(0,s.jsx)("div",{className:"w-8 h-8 rounded border border-gray-300 cursor-pointer",style:{backgroundColor:t},onClick:r,title:"Click to edit background color"})]}),m&&g&&b&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"h-6 w-px bg-gray-300 mx-2"}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(c.$,{variant:"ghost",size:"icon",onClick:m,disabled:!j,className:"h-8 w-8",title:"Undo color change",children:(0,s.jsx)(f,{className:"h-4 w-4"})}),(0,s.jsx)(c.$,{variant:"ghost",size:"icon",onClick:g,disabled:!v,className:"h-8 w-8",title:"Redo color change",children:(0,s.jsx)(p,{className:"h-4 w-4"})})]})]})]}),(0,s.jsx)("div",{className:"flex items-center gap-2",children:y&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.$,{variant:"outline",size:"sm",onClick:o,children:"Reset"}),(0,s.jsx)(c.$,{variant:"outline",size:"sm",onClick:()=>{let e=i();M(JSON.stringify({background:e.background,items:e.items.map(e=>{let{label:t,description:l,color:s}=e;return{label:t,description:l,color:s}})},null,2)),N(!0)},children:"Export JSON"}),(0,s.jsx)(c.$,{variant:"outline",size:"sm",onClick:()=>{E("".concat(window.location.origin).concat(window.location.pathname,"#").concat(a())),k(!0)},children:"Copy URL"})]})})]}),(0,s.jsx)(u.lG,{open:w,onOpenChange:N,children:(0,s.jsxs)(u.Cf,{className:"max-w-2xl","aria-describedby":"export-dialog-description",children:[(0,s.jsxs)(u.c7,{children:[(0,s.jsx)(u.L3,{children:"Export JSON"}),(0,s.jsx)(u.rr,{id:"export-dialog-description",children:"Copy this JSON data to use in your application"})]}),(0,s.jsx)("div",{className:"bg-gray-100 p-4 rounded-md overflow-auto max-h-[60vh] mb-4",children:(0,s.jsx)("pre",{className:"text-sm",children:S})}),(0,s.jsx)(u.Es,{children:(0,s.jsx)(c.$,{onClick:()=>I(S),children:"Copy to Clipboard"})})]})}),(0,s.jsx)(u.lG,{open:C,onOpenChange:k,children:(0,s.jsxs)(u.Cf,{className:"max-w-2xl","aria-describedby":"url-dialog-description",children:[(0,s.jsxs)(u.c7,{children:[(0,s.jsx)(u.L3,{children:"Share URL"}),(0,s.jsx)(u.rr,{id:"url-dialog-description",children:"Copy this URL to share your color palette"})]}),(0,s.jsx)("div",{className:"bg-gray-100 p-4 rounded-md overflow-auto mb-4",children:(0,s.jsx)("p",{className:"text-sm break-all",children:R})}),(0,s.jsx)(u.Es,{children:(0,s.jsx)(c.$,{onClick:()=>I(R),children:"Copy to Clipboard"})})]})}),(0,s.jsx)(U,{})]})}var j=l(900),v=l(7687);let b=n.forwardRef((e,t)=>{let{className:l,...n}=e;return(0,s.jsx)("textarea",{className:(0,v.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",l),ref:t,...n})});b.displayName="Textarea";var y=l(1006);function w(e){let{selectedTiles:t,onUpdateTiles:l,colors:r,onUpdateColors:o,onRemoveSelected:i,onClearSelection:a,onConfirmNormalization:h}=e,[u,x]=(0,n.useState)(""),[m,f]=(0,n.useState)("");return((0,n.useEffect)(()=>{if(0===t.length){x(""),f("");return}let e=t.every(e=>e.label===t[0].label),l=t.every(e=>e.description===t[0].description);x(e?t[0].label:"(varied)"),f(l?t[0].description:"(varied)")},[t]),0===t.length&&0===r.length)?(0,s.jsx)("div",{className:"w-96 border-l p-4 bg-white flex flex-col h-full items-center justify-center",children:(0,s.jsxs)("div",{className:"flex flex-col items-center gap-2 text-gray-500",children:[(0,s.jsx)("div",{className:"rounded-full bg-gray-100 p-3",children:(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,s.jsx)("path",{d:"M16 2v5h5"}),(0,s.jsx)("path",{d:"M21 6v14a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h12l5 3Z"}),(0,s.jsx)("path",{d:"M9.5 10.5 6 14h12l-3.5-3.5-2 2-3-3Z"})]})}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-sm font-medium mb-1",children:"Right-click to create a new tile"}),(0,s.jsx)("p",{className:"text-sm font-medium",children:"Left-click to select a tile"})]})]})}):(0,s.jsxs)("div",{className:"w-96 border-l p-4 bg-white overflow-y-auto flex flex-col h-full",children:[r.length>0&&(0,s.jsx)("div",{className:"mb-3",children:(0,s.jsx)(y.l,{colors:r,onChange:o,confirmNormalization:h})}),t.length>0&&(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(d.J,{htmlFor:"label",children:"Label"}),(0,s.jsx)(j.p,{id:"label",value:u,onChange:e=>{x(e.target.value),l({label:e.target.value})},placeholder:"Enter label"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(d.J,{htmlFor:"description",children:"Description"}),(0,s.jsx)(b,{id:"description",value:m,onChange:e=>{f(e.target.value),l({description:e.target.value})},placeholder:"Enter description",rows:3})]}),(0,s.jsx)("div",{className:"w-full",children:(0,s.jsx)(c.$,{variant:"destructive",onClick:i,className:"w-full",children:"Remove Selected"})})]})})]})}function N(e){let{color1:t,color2:l}=e;if(!t||!l)return null;let n=function(e,t){let l=r(e),s=r(t);return(Math.max(l,s)+.05)/(Math.min(l,s)+.05)}(t,l);return(0,s.jsxs)("div",{className:"h-14 border-t bg-white flex items-center px-4 gap-4",children:[(0,s.jsxs)("div",{className:"flex h-8 w-32 rounded overflow-hidden",children:[(0,s.jsx)("div",{className:"flex-1 flex items-center justify-center",style:{backgroundColor:t,color:l},children:(0,s.jsx)("span",{className:"text-xs",children:"Sample"})}),(0,s.jsx)("div",{className:"flex-1 flex items-center justify-center",style:{backgroundColor:l,color:t},children:(0,s.jsx)("span",{className:"text-xs",children:"Sample"})})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("span",{className:"text-sm font-medium mr-2",children:"Contrast:"}),(0,s.jsxs)("span",{className:"text-sm font-bold",children:[n.toFixed(2),":1"]})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("span",{className:"text-sm font-medium mr-2",children:"WCAG AA:"}),(0,s.jsx)("span",{className:"text-sm font-medium ".concat(n>=4.5?"text-green-600":"text-red-600"),children:n>=4.5?"Pass":"Fail"})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("span",{className:"text-sm font-medium mr-2",children:"WCAG AAA:"}),(0,s.jsx)("span",{className:"text-sm font-medium ".concat(n>=7?"text-green-600":"text-red-600"),children:n>=7?"Pass":"Fail"})]})]})}function C(e){let{isOpen:t,onClose:l,onConfirm:n,title:r,message:o}=e;return(0,s.jsx)(u.lG,{open:t,onOpenChange:l,children:(0,s.jsxs)(u.Cf,{"aria-describedby":"confirmation-dialog-description",children:[(0,s.jsxs)(u.c7,{children:[(0,s.jsx)(u.L3,{children:r}),(0,s.jsx)(u.rr,{id:"confirmation-dialog-description",children:o})]}),(0,s.jsxs)(u.Es,{children:[(0,s.jsx)(c.$,{variant:"outline",onClick:l,children:"Cancel"}),(0,s.jsx)(c.$,{onClick:n,children:"Confirm"})]})]})})}function k(e){return{past:[],present:e,future:[]}}function S(e,t){var l,s;return(l=e.present,s=t,l.length===s.length&&l.every((e,t)=>e===s[t]))?e:{past:[...e.past,e.present],present:t,future:[]}}function M(e){return e.past.length>0}function R(e){return e.future.length>0}function E(){let[e,t]=(0,n.useState)([]),[l,r]=(0,n.useState)([]),[o,i]=(0,n.useState)("#f0f0f0"),[c,d]=(0,n.useState)(!1),h=(0,n.useRef)(null),[u,x]=(0,n.useState)(!1),[m,f]=(0,n.useState)(void 0),[p,j]=(0,n.useState)(void 0),[v,b]=(0,n.useState)(k([])),[y,E]=(0,n.useState)(0),[L,U]=(0,n.useState)(!1),[I,F]=(0,n.useState)("initialization"),[T,D]=(0,n.useState)(null),[A,z]=(0,n.useState)([]);(0,n.useEffect)(()=>{let e=window.location.hash.substring(1);if(e)try{x(!0);let l=function(e){try{let t=atob(e);console.log("Decoded string:",t);let l=t.split("|"),s=l[0],n=decodeURIComponent(s.split("=")[1]),r=[];for(let e=1;e<l.length;e++){let t=l[e].split(":");if(t.length>=5){let e="tile-".concat(t[0],"-").concat(t[1],"-").concat(t[3],"-").concat(t[4]);r.push({id:e,label:decodeURIComponent(t[0]),color:decodeURIComponent(t[1]),description:decodeURIComponent(t[2]),x:Number.parseInt(t[3],10),y:Number.parseInt(t[4],10),width:90,height:90})}}return console.log("Decoded items:",r),{background:n,items:r}}catch(e){return console.error("Error decoding state:",e),{background:"#f0f0f0",items:[]}}}(e);console.log("Decoded state:",l);let s=l.items.map(e=>({...e,width:90,height:90}));t(s),i(l.background),setTimeout(()=>{let e=document.querySelector(".relative.overflow-auto.flex-1");e&&e.focus()},100)}catch(e){console.error("Failed to decode state from URL:",e)}finally{x(!1)}},[]),(0,n.useEffect)(()=>{!(l.length>0&&l.every(t=>e.some(e=>e.id===t)))&&b(k(c?[o]:l.map(t=>{let l=e.find(e=>e.id===t);return l?l.color:"#000000"})))},[l,c,e]),(0,n.useEffect)(()=>{if(1===l.length){let t=e.find(e=>e.id===l[0]);t&&(f(t.color),j(o))}else if(2===l.length){let t=e.find(e=>e.id===l[0]),s=e.find(e=>e.id===l[1]);t&&s&&(f(t.color),j(s.color))}else f(void 0),j(void 0)},[l,e,o]);let O=()=>{t(e.filter(e=>!l.includes(e.id))),r([])},G=s=>{if(c)s.length>0&&i(s[0]);else{let n=[...e];l.forEach((e,t)=>{if(t<s.length){let l=n.findIndex(t=>t.id===e);-1!==l&&(n[l]={...n[l],color:s[t]})}}),t(n),1===l.length&&s.length>0?(f(s[0]),j(o)):2===l.length&&s.length>=2&&(f(s[0]),j(s[1]))}},K=c?[o]:l.map(t=>{let l=e.find(e=>e.id===t);return l?l.color:"#000000"}),$=e=>{("Delete"===e.key||"Backspace"===e.key)&&l.length>0&&O()},H=c||l.length>0,B=e=>{U(!1),T&&(T(e),D(null)),e||(r([]),d(!1))},P=e=>{let t=parseInt(e.slice(1,3),16),l=parseInt(e.slice(3,5),16);return(.299*t+.587*l+.114*parseInt(e.slice(5,7),16))/255>.5?"#000000":"#FFFFFF"};return u?(0,s.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500 mx-auto"}),(0,s.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):(0,s.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,s.jsx)(g,{backgroundColor:o,onBackgroundColorChange:i,onBackgroundSelect:()=>{d(!0),r([])},onReset:()=>{t([]),r([]),i("#f0f0f0"),d(!1)},getExportData:()=>({background:o,items:[...e].sort((e,t)=>e.label.localeCompare(t.label)).map(e=>{let{id:t,x:l,y:s,width:n,height:r,...o}=e;return{...o,id:t,x:l,y:s,width:n,height:r}})}),getUrlEncodedState:()=>(function(e){try{let t="background=".concat(encodeURIComponent(e.background));return e.items.forEach(e=>{t+="|".concat(encodeURIComponent(e.label),":").concat(encodeURIComponent(e.color),":").concat(encodeURIComponent(e.description),":").concat(e.x,":").concat(e.y)}),btoa(t)}catch(e){return console.error("Error encoding state:",e),""}})({background:o,items:e}),onUndo:()=>{if(M(v)){let e=function(e){if(0===e.past.length)return e;let t=e.past[e.past.length-1];return{past:e.past.slice(0,e.past.length-1),present:t,future:[e.present,...e.future]}}(v);b(e),G(e.present),E(e=>e+1)}},onRedo:()=>{if(R(v)){let e=function(e){if(0===e.future.length)return e;let t=e.future[0],l=e.future.slice(1);return{past:[...e.past,e.present],present:t,future:l}}(v);b(e),G(e.present),E(e=>e+1)}},canUndo:M(v),canRedo:R(v),showUndoRedo:H,hasTiles:e.length>0}),(0,s.jsxs)("div",{className:"flex flex-1 overflow-hidden",children:[(0,s.jsx)("div",{className:"relative overflow-auto flex-1",onKeyDown:$,tabIndex:0,children:(0,s.jsx)(a,{ref:h,tiles:e,selectedIds:l,backgroundColor:o,onCreateTile:(s,n,o)=>{c&&d(!1);let i={id:"tile-".concat(Date.now()),label:"color ".concat(e.length+1),description:"",color:"#"+Math.floor(0xffffff*Math.random()).toString(16).padStart(6,"0"),x:20*Math.round(s/20),y:20*Math.round(n/20),width:90,height:90};t([...e,i]),o?r([...l,i.id]):r([i.id])},onTileMove:(l,s,n)=>{t(e.map(e=>e.id===l?{...e,x:20*Math.round(s/20),y:20*Math.round(n/20)}:e))},onSelectionChange:t=>{r(t),d(!1),b(k(t.map(t=>{let l=e.find(e=>e.id===t);return l?l.color:"#000000"})))},onTileReorder:l=>{let s=[...e],n=s.findIndex(e=>e.id===l);if(-1!==n){let[e]=s.splice(n,1);s.push(e),t(s)}},onMultiTileMove:(l,s,n)=>{t(e.map(e=>l.includes(e.id)?{...e,x:20*Math.round((e.x+s)/20),y:20*Math.round((e.y+n)/20)}:e))},onKeyDown:$,onClick:()=>{c&&d(!1)},onMoveEnd:()=>{},onUpdateContrastColors:(e,t)=>{f(e),j(t)}})}),(0,s.jsx)(w,{selectedTiles:l.map(t=>e.find(e=>e.id===t)).filter(Boolean),onUpdateTiles:s=>{t(e.map(e=>l.includes(e.id)?{...e,...s}:e))},colors:K,onUpdateColors:(s,n)=>{if(0===l.length)(i(s[0]),n)?b(k([s[0]])):b(S(v,[o]));else{let r=e.map(e=>{if(l.includes(e.id)){let t=l.indexOf(e.id);return{...e,color:s[t]}}return e});(t(r),n)?b(k(s)):b(S(v,r.filter(e=>l.includes(e.id)).map(e=>e.color)))}if(z(s.map(e=>P(e))),n){let e=document.querySelector(".relative.overflow-auto.flex-1");e&&e.focus()}},onRemoveSelected:O,onClearSelection:()=>r([]),onConfirmNormalization:e=>new Promise(t=>{U(!0),F(e),D(()=>t)})},y)]}),(0,s.jsx)(N,{color1:m,color2:p}),(0,s.jsx)(C,{isOpen:L,onClose:()=>B(!1),onConfirm:()=>B(!0),title:"Confirm Color Normalization",message:"This action will normalize the selected colors. Do you want to proceed?"})]})}},5954:(e,t,l)=>{Promise.resolve().then(l.bind(l,1992))}},e=>{var t=t=>e(e.s=t);e.O(0,[839,567,497,954,358],()=>t(5954)),_N_E=e.O()}]);